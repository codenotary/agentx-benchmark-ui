{"version":3,"file":"migration.worker-Cy8et84E.js","sources":["../src/services/jsonicService.ts","../src/services/migration.worker.ts"],"sourcesContent":["// JSONIC v3.3 Collection-based API\ninterface JsonicCollection {\n  insertOne(doc: any): Promise<{ _id: string }>;\n  insertMany(docs: any[]): Promise<{ insertedIds: string[] }>;\n  findOne(filter: any): Promise<any>;\n  find(filter: any, options?: FindOptions): Promise<any[]>;\n  updateOne(filter: any, update: any): Promise<UpdateResult>;\n  updateMany(filter: any, update: any): Promise<UpdateResult>;\n  deleteOne(filter: any): Promise<DeleteResult>;\n  deleteMany(filter: any): Promise<DeleteResult>;\n  aggregate(pipeline: any[]): Promise<any[]>;\n  count(filter?: any): Promise<number>;\n}\n\ninterface JsonicDatabase {\n  collection(name: string): JsonicCollection;\n  export(): Promise<any>;\n  exportToFile(filename: string): Promise<void>;\n}\n\ninterface FindOptions {\n  limit?: number;\n  skip?: number;\n  sort?: Record<string, 1 | -1>;\n  projection?: Record<string, 0 | 1>;\n}\n\ninterface UpdateResult {\n  matchedCount: number;\n  modifiedCount: number;\n}\n\ninterface DeleteResult {\n  deletedCount: number;\n}\n\n// JSONIC v3.3 API\ninterface JSONIC {\n  create(options?: {\n    name?: string;\n    version?: number;\n    persistence?: boolean;\n    persistenceConfig?: {\n      wasmPath?: string;\n      workerPath?: string;\n      snapshotInterval?: number;\n    };\n    crossTabSync?: boolean;\n    syncChannel?: string;\n  }): Promise<JsonicDatabase>;\n}\n\nclass JsonicService {\n  private static instance: JsonicService;\n  private db: JsonicDatabase | null = null;\n  private collection: JsonicCollection | null = null;\n  private initPromise: Promise<void> | null = null;\n  private jsonicModule: JSONIC | null = null;\n\n  private constructor() {}\n\n  static getInstance(): JsonicService {\n    if (!JsonicService.instance) {\n      JsonicService.instance = new JsonicService();\n    }\n    return JsonicService.instance;\n  }\n  \n  async initialize(): Promise<void> {\n    if (this.db) return;\n    \n    if (!this.initPromise) {\n      this.initPromise = this.performInitialization();\n    }\n    \n    return this.initPromise;\n  }\n  \n  private async performInitialization(): Promise<void> {\n    const initStartTime = performance.now();\n    console.log('[JSONIC v3.3] Starting initialization...');\n    console.log('[JSONIC] Environment:', {\n      isDev: import.meta.env.DEV,\n      baseUrl: import.meta.env.BASE_URL,\n      mode: import.meta.env.MODE,\n      location: typeof window !== 'undefined' ? window.location.href : 'worker',\n    });\n\n    try {\n      // Load JSONIC v3.3 using legacy wrapper implementation\n      const baseUrl = import.meta.env.BASE_URL || '/';\n      const isWorker = typeof window === 'undefined' && typeof self !== 'undefined';\n\n      let jsonicUrl: string;\n      if (isWorker) {\n        jsonicUrl = `${baseUrl}jsonic-worker-wrapper.js`;\n      } else {\n        jsonicUrl = import.meta.env.DEV\n          ? `${self.location ? self.location.origin : 'http://localhost:5173'}/jsonic-wrapper-v3.esm.js`\n          : `${baseUrl}jsonic-wrapper-v3.esm.js`;\n      }\n\n      console.log('[JSONIC] Loading wrapper from:', jsonicUrl);\n\n      const module = await import(/* @vite-ignore */ jsonicUrl) as { default: any };\n      const JSONICModule = module.default;\n\n      if (!JSONICModule) {\n        throw new Error('JSONIC module not found');\n      }\n\n      const dbCreateStartTime = performance.now();\n      // v3 wrapper uses createDatabase instead of create\n      this.db = await JSONICModule.createDatabase({\n        name: 'agentx_benchmark',\n        persistence: false,\n        enablePersistence: false\n      });\n      console.log(`[JSONIC] Database created in ${(performance.now() - dbCreateStartTime).toFixed(2)}ms`);\n\n      // v3 wrapper doesn't use collections - direct database API\n      console.log('[JSONIC v3.3] Initialized successfully');\n\n      const totalInitTime = performance.now() - initStartTime;\n      console.log(`[JSONIC] Total initialization time: ${totalInitTime.toFixed(2)}ms`);\n\n      if (totalInitTime > 1000) {\n        console.warn(`[JSONIC] ⚠️ Slow initialization: ${totalInitTime.toFixed(2)}ms`);\n      }\n\n    } catch (error) {\n      console.error('[JSONIC] Failed to initialize:', error);\n      console.error(`[JSONIC] Failed after ${(performance.now() - initStartTime).toFixed(2)}ms`);\n      throw error;\n    }\n  }\n  \n  async getDatabase(): Promise<JsonicDatabase> {\n    if (!this.db) {\n      await this.initialize();\n    }\n\n    if (!this.db) {\n      throw new Error('JSONIC database not initialized');\n    }\n\n    return this.db;\n  }\n\n  async getCollection(): Promise<JsonicCollection> {\n    // v3 wrapper uses direct DB API, not collections\n    // Return a wrapper that implements the collection interface\n    const db = await this.getDatabase();\n    return db as unknown as JsonicCollection;\n  }\n\n  // Legacy compatibility methods - converted to collection API\n  async insert(data: any): Promise<string> {\n    const db = await this.getDatabase();\n    // v3 wrapper uses insert() which returns the ID directly\n    const id = await (db as any).insert(data);\n    return id;\n  }\n\n  async get(id: string): Promise<any> {\n    const coll = await this.getCollection();\n    return coll.findOne({ _id: id });\n  }\n\n  async update(id: string, data: any): Promise<void> {\n    const coll = await this.getCollection();\n    await coll.updateOne({ _id: id }, { $set: data });\n  }\n\n  async delete(id: string): Promise<void> {\n    const coll = await this.getCollection();\n    await coll.deleteOne({ _id: id });\n  }\n\n  async listIds(): Promise<string[]> {\n    const coll = await this.getCollection();\n    const docs = await coll.find({}, { projection: { _id: 1 } });\n    return docs.map(doc => doc._id);\n  }\n\n  async getStats(): Promise<any> {\n    const count = await this.count();\n    return {\n      documentCount: count,\n      collectionName: 'benchmarks'\n    };\n  }\n\n  async query(filter: (item: any) => boolean): Promise<any[]> {\n    const coll = await this.getCollection();\n    const docs = await coll.find({});\n    return docs.filter(filter);\n  }\n\n  // Collection-based query methods (v3.3 API)\n  async findDocuments(filter: any, options?: FindOptions): Promise<any[]> {\n    const db = await this.getDatabase();\n    // v3 wrapper uses query() for filtering\n    console.log('[JSONIC-SERVICE] findDocuments called with filter:', filter, 'options:', options);\n\n    // Debug: Check what's actually in the database\n    const allIds = await (db as any).list();\n    console.log('[JSONIC-SERVICE] Total IDs in database:', allIds.length);\n    if (allIds.length > 0) {\n      const firstDoc = await (db as any).get(allIds[0]);\n      console.log('[JSONIC-SERVICE] First document from DB:', firstDoc);\n      console.log('[JSONIC-SERVICE] First document keys:', firstDoc ? Object.keys(firstDoc) : 'null');\n    }\n\n    const results = await (db as any).query(filter, options);\n    console.log('[JSONIC-SERVICE] findDocuments returned:', results.length, 'documents');\n    if (results.length > 0) {\n      console.log('[JSONIC-SERVICE] First result:', results[0]);\n    }\n    return results;\n  }\n\n  async findOne(filter: any): Promise<any> {\n    const db = await this.getDatabase();\n    // v3 wrapper has findOne\n    return (db as any).findOne(filter);\n  }\n\n  async find(filter: any = {}, options?: FindOptions): Promise<any[]> {\n    const db = await this.getDatabase();\n    // v3 wrapper find() returns chainable, need to call toArray() or use query()\n    return (db as any).query(filter, options);\n  }\n\n  // Batch operations (v3.3 API)\n  async insertMany(documents: any[]): Promise<string[]> {\n    const db = await this.getDatabase();\n    // v3 wrapper insertMany returns array of IDs directly\n    const ids = await (db as any).insertMany(documents);\n    return ids;\n  }\n\n  async updateMany(filter: any, update: any): Promise<UpdateResult> {\n    const coll = await this.getCollection();\n    return coll.updateMany(filter, update);\n  }\n\n  async deleteMany(filter: any): Promise<DeleteResult> {\n    const coll = await this.getCollection();\n    return coll.deleteMany(filter);\n  }\n\n  // Aggregation pipeline (v3.3 API)\n  async aggregate(pipeline: any[]): Promise<any[]> {\n    const coll = await this.getCollection();\n    return coll.aggregate(pipeline);\n  }\n\n  // Count documents\n  async count(filter: any = {}): Promise<number> {\n    const db = await this.getDatabase();\n    // v3 wrapper doesn't have direct count, use query and get length\n    const results = await (db as any).query(filter);\n    return results.length;\n  }\n\n  // Helper method for benchmark statistics using aggregation\n  async getBenchmarkStats(testId?: string): Promise<any> {\n    const pipeline: any[] = [];\n    \n    if (testId) {\n      pipeline.push({ $match: { testId } });\n    }\n    \n    pipeline.push(\n      {\n        $group: {\n          _id: '$testId',\n          avgDuration: { $avg: '$duration' },\n          minDuration: { $min: '$duration' },\n          maxDuration: { $max: '$duration' },\n          totalRuns: { $sum: 1 },\n          successCount: { $sum: { $cond: [{ $eq: ['$status', 'success'] }, 1, 0] } },\n          failureCount: { $sum: { $cond: [{ $eq: ['$status', 'failure'] }, 1, 0] } }\n        }\n      },\n      {\n        $sort: { totalRuns: -1 }\n      }\n    );\n    \n    return this.aggregate(pipeline);\n  }\n}\n\nexport const jsonicService = JsonicService.getInstance();","// Web Worker for JSONIC database operations\n// This runs in a separate thread to avoid blocking the main UI thread\n\nimport { jsonicService } from './jsonicService';\n\n// Post messages back to the main thread\nconst postProgress = (progress: any) => {\n  self.postMessage({ type: 'progress', payload: progress });\n};\n\nconst performMigration = async () => {\n  try {\n    console.log('🔧 WORKER: Starting JSONIC migration...');\n    postProgress({\n      phase: 'loading',\n      current: 0,\n      total: 100,\n      message: 'Loading data in background...',\n      percentage: 10,\n    });\n\n    // In a worker, we need to construct the full URL to the data file\n    const basePath = '/agentx-benchmark-ui/'; // GitHub Pages base path\n    const dataUrl = new URL(`${basePath}data/database.json`, self.location.origin).href;\n\n    const response = await fetch(dataUrl);\n    if (!response.ok) {\n      throw new Error(`Failed to fetch database.json: ${response.status}`);\n    }\n    const jsonData = await response.json();\n\n    const totalDocs =\n      (jsonData.benchmark_runs?.length || 0) +\n      (jsonData.model_performance?.length || 0) +\n      (jsonData.test_results?.length || 0) +\n      (jsonData.performance_trends?.length || 0);\n\n    console.log(`🔧 WORKER: Processing ${totalDocs} documents`);\n\n    postProgress({\n      phase: 'migrating',\n      current: 0,\n      total: totalDocs,\n      message: 'Initializing JSONIC in worker...',\n      percentage: 15,\n    });\n\n    // Initialize JSONIC in the worker thread\n    await jsonicService.initialize();\n\n    let migratedCount = 0;\n    const BATCH_SIZE = 50; // Larger batches are fine in a worker\n\n    const insertBatch = async (documents: any[]) => {\n      for (let i = 0; i < documents.length; i += BATCH_SIZE) {\n        const batch = documents.slice(i, Math.min(i + BATCH_SIZE, documents.length));\n\n        // Insert batch in parallel within worker\n        await Promise.all(\n          batch.map(doc => jsonicService.insert(doc))\n        );\n\n        migratedCount += batch.length;\n        const percentage = 20 + (migratedCount / totalDocs) * 70;\n        \n        postProgress({\n          phase: 'migrating',\n          current: migratedCount,\n          total: totalDocs,\n          message: `Processing documents... (${migratedCount}/${totalDocs})`,\n          percentage,\n        });\n      }\n    };\n\n    // Helper to create document with type tagging\n    const createDocument = (type: string, data: any, runId?: string) => ({\n      _type: type,\n      _runId: runId,\n      _timestamp: new Date().toISOString(),\n      ...data\n    });\n\n    // Process data in order of importance\n    if (jsonData.benchmark_runs) {\n      const docs = jsonData.benchmark_runs.map((run: any) => \n        createDocument('benchmark_run', run)\n      );\n      await insertBatch(docs);\n      console.log(`🔧 WORKER: Migrated ${docs.length} benchmark runs`);\n    }\n\n    if (jsonData.model_performance) {\n      const docs = jsonData.model_performance.map((perf: any) => \n        createDocument('model_performance', perf, perf.run_id)\n      );\n      await insertBatch(docs);\n      console.log(`🔧 WORKER: Migrated ${docs.length} model performance records`);\n    }\n\n    if (jsonData.test_results) {\n      const docs = jsonData.test_results.map((test: any) => \n        createDocument('test_result', test, test.run_id)\n      );\n      await insertBatch(docs);\n      console.log(`🔧 WORKER: Migrated ${docs.length} test results`);\n    }\n\n    if (jsonData.performance_trends) {\n      const docs = jsonData.performance_trends.map((trend: any) => \n        createDocument('performance_trend', trend)\n      );\n      await insertBatch(docs);\n      console.log(`🔧 WORKER: Migrated ${docs.length} performance trends`);\n    }\n\n    postProgress({\n      phase: 'complete',\n      current: totalDocs,\n      total: totalDocs,\n      message: `✅ Migration complete! ${totalDocs} documents processed.`,\n      percentage: 100,\n    });\n\n    console.log(`🎉 WORKER: Migration successful - ${totalDocs} documents`);\n    self.postMessage({ type: 'migrationComplete', payload: true });\n\n  } catch (error) {\n    console.error('❌ WORKER: Migration failed:', error);\n    postProgress({\n      phase: 'error',\n      current: 0,\n      total: 100,\n      message: error instanceof Error ? error.message : 'Unknown worker error',\n      percentage: 0,\n    });\n    self.postMessage({ type: 'migrationComplete', payload: false });\n  }\n};\n\n// Listen for messages from the main thread\nself.onmessage = (event) => {\n  if (event.data.type === 'startMigration') {\n    performMigration();\n  }\n};\n\nexport {};"],"names":["JsonicService","initStartTime","baseUrl","isWorker","jsonicUrl","JSONICModule","dbCreateStartTime","totalInitTime","error","data","id","doc","filter","options","db","allIds","firstDoc","results","documents","update","pipeline","testId","jsonicService","postProgress","progress","performMigration","basePath","dataUrl","response","jsonData","totalDocs","migratedCount","BATCH_SIZE","insertBatch","i","batch","percentage","createDocument","type","runId","docs","run","perf","test","trend","event"],"mappings":"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"}